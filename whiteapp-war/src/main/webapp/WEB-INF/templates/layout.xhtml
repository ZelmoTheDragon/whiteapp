<?xml version='1.0' encoding='UTF-8' ?>
<!--
    Structure de base pour les autres pages JSF.
-->
<!DOCTYPE html>
<html 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    lang="#{internationalization.currentLocale}">

    <h:head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
        <link rel="image/x-icon" href="#{resource['default/images/favicon.ico']}" />
        <h:outputStylesheet library="primefaces" name="primeicons/primeicons.css" />
        <h:outputStylesheet library="webjars" name="primeflex.2.0.0/primeflex.min.css" />
        <h:outputStylesheet library="default" name="styles/main.css" />
        <title>
            <h:outputText value="#{m['app.title']}" />
        </title>

        <f:loadBundle basename="Messages" var="m" />
        <f:view locale="#{internationalization.currentLocale}" />

        <ui:insert name="header">
            <!-- À REDÉFINIR -->
        </ui:insert>
    </h:head>
    <h:body>
        <header>
            <nav>
                <h:form id="menu">

                    <p:commandButton 
                        id="menu-button"
                        type="button"
                        icon="pi pi-bars" />

                    <p:menu overlay="true" trigger="menu-button" my="left top" at="left bottom">
                        <p:menuitem value="#{m['lang.fr']}" icon="pi pi-globe" actionListener="#{internationalization.changeLocale('FR')}" />
                        <p:menuitem value="#{m['lang.en']}" icon="pi pi-globe" actionListener="#{internationalization.changeLocale('EN')}" />
                        <p:separator />
                        <p:menuitem value="#{m['menu.home']}" icon="pi pi-home" url="#{request.contextPath}/faces/protected/home.xhtml" />
                        <p:menuitem value="#{m['menu.agent']}" icon="pi pi-users" url="#{request.contextPath}/faces/protected/agent.xhtml" />
                        <p:separator />
                        <p:menuitem value="#{m['menu.logout']}" icon="pi pi-sign-out" action="#{securityController.logout()}" />
                    </p:menu>

                </h:form>
            </nav>
            <ui:insert name="title">
                <!-- À REDÉFINIR -->
            </ui:insert>
        </header>
        <ui:insert name="main">
            <!-- À REDÉFINIR -->
        </ui:insert>
        <footer>
            <h:panelGroup class="version" layout="block">
                <h:outputText value="#{m['app.version']}" />
            </h:panelGroup>
        </footer>
        <h:outputScript library="public" name="scripts/datepicker.js" />
        <h:outputScript library="public" name="scripts/main.js" />
    </h:body>

</html>

